<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>üéÆ Player 2, Will You Be My Valentine? üéÆ</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { width: 100%; height: 100%; overflow-x: hidden; }

    body {
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0a0a1a;
      font-family: 'Press Start 2P', cursive;
      padding: max(15px, 3vh) max(15px, 3vw);
      position: relative;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: 
        linear-gradient(90deg, #1a1a3e 1px, transparent 1px),
        linear-gradient(0deg, #1a1a3e 1px, transparent 1px);
      background-size: 30px 30px;
      animation: gridMove 20s linear infinite;
      opacity: 0.3;
    }

    @keyframes gridMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(30px, 30px); }
    }

    #confettiCanvas { position: fixed; inset: 0; pointer-events: none; z-index: 9999; }

    .arcade {
      width: min(460px, 92vw);
      max-height: 85vh;
      max-height: 85dvh;
      overflow-y: auto;
      background: linear-gradient(135deg, #1a1a3e 0%, #0a0a1a 100%);
      border: 4px solid #00f5ff;
      border-radius: clamp(12px, 2.5vw, 20px);
      padding: clamp(20px, 4vh, 30px) clamp(15px, 3vw, 20px);
      box-shadow: 0 0 30px #00f5ff, inset 0 0 20px rgba(0,245,255,0.1);
      text-align: center;
    }

    .screen {
      background: #000;
      border: 3px solid #333;
      border-radius: 8px;
      padding: clamp(18px, 3.5vh, 25px) clamp(12px, 2.5vw, 15px);
      margin-bottom: clamp(18px, 3.5vh, 25px);
      box-shadow: inset 0 0 20px rgba(0,245,255,0.2);
    }

    .pixel-heart {
      width: min(100px, 24vw);
      height: min(100px, 24vw);
      margin: 0 auto clamp(15px, 3vh, 20px);
      image-rendering: pixelated;
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    h1 {
      font-size: clamp(11px, 2.8vw, 16px);
      color: #ff006e;
      text-shadow: 0 0 10px #ff006e;
      line-height: 1.8;
      margin-bottom: clamp(8px, 1.5vh, 10px);
      letter-spacing: 1px;
    }

    .player-text {
      font-size: clamp(9px, 2.2vw, 13px);
      color: #00f5ff;
      text-shadow: 0 0 10px #00f5ff;
      margin-bottom: clamp(18px, 3.5vh, 25px);
    }

    .controls {
      position: relative;
      height: clamp(160px, 36vw, 200px);
      margin: clamp(15px, 3vh, 20px) 0;
    }

    button {
      position: absolute;
      padding: clamp(13px, 2.8vw, 16px) clamp(22px, 4.5vw, 30px);
      font-family: 'Press Start 2P', cursive;
      font-size: clamp(11px, 2.5vw, 15px);
      border: 3px solid;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.1s;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      white-space: nowrap;
    }

    #yesBtn {
      left: 5%;
      top: 50%;
      transform: translateY(-50%);
      background: #ff006e;
      border-color: #ff4d94;
      color: #fff;
      box-shadow: 0 0 20px #ff006e, 0 4px 0 #cc0058;
    }

    #noBtn {
      right: 5%;
      top: 50%;
      transform: translateY(-50%);
      background: #666;
      border-color: #888;
      color: #fff;
      box-shadow: 0 0 10px rgba(255,255,255,0.3), 0 4px 0 #444;
    }

    /* Stack buttons vertically on very small screens */
    @media (max-width: 380px) {
      .controls { height: 180px; }
      #yesBtn {
        left: 50%;
        top: 35%;
        transform: translate(-50%, -50%);
      }
      #noBtn {
        left: 50%;
        top: 70%;
        transform: translate(-50%, -50%);
        right: auto;
      }
    }

    .hint {
      font-size: clamp(7px, 1.8vw, 10px);
      color: #8b00ff;
      text-shadow: 0 0 10px #8b00ff;
      margin-top: clamp(10px, 2vh, 15px);
      line-height: 1.6;
    }

    .result {
      display: none;
      animation: gameOver 0.6s ease;
    }

    @keyframes gameOver {
      0% { transform: scale(0.5); opacity: 0; }
      60% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }

    .result h2 {
      font-size: clamp(13px, 3.2vw, 20px);
      color: #00ff00;
      text-shadow: 0 0 10px #00ff00;
      margin: clamp(12px, 2.5vh, 15px) 0;
      letter-spacing: 2px;
    }

    .achievement {
      background: rgba(255,215,0,0.1);
      border: 2px solid gold;
      border-radius: 8px;
      padding: clamp(12px, 2.5vh, 15px);
      margin-top: clamp(12px, 2.5vh, 15px);
      font-size: clamp(8px, 1.9vw, 11px);
      color: gold;
      text-shadow: 0 0 10px gold;
      line-height: 1.8;
    }

    .trophy {
      font-size: clamp(30px, 7vw, 40px);
      animation: spin 2s ease-in-out infinite;
      display: inline-block;
    }

    @keyframes spin {
      0%, 100% { transform: rotate(-10deg); }
      50% { transform: rotate(10deg); }
    }
  </style>
</head>

<body>
  <canvas id="confettiCanvas"></canvas>

  <main class="arcade">
    <div class="screen">
      <svg class="pixel-heart" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="2" width="2" height="2" fill="#ff006e"/>
        <rect x="4" y="2" width="2" height="2" fill="#ff006e"/>
        <rect x="10" y="2" width="2" height="2" fill="#ff006e"/>
        <rect x="12" y="2" width="2" height="2" fill="#ff006e"/>
        <rect x="0" y="4" width="2" height="2" fill="#ff006e"/>
        <rect x="2" y="4" width="2" height="2" fill="#ff4d94"/>
        <rect x="4" y="4" width="2" height="2" fill="#ff4d94"/>
        <rect x="6" y="4" width="2" height="2" fill="#ff006e"/>
        <rect x="8" y="4" width="2" height="2" fill="#ff006e"/>
        <rect x="10" y="4" width="2" height="2" fill="#ff4d94"/>
        <rect x="12" y="4" width="2" height="2" fill="#ff4d94"/>
        <rect x="14" y="4" width="2" height="2" fill="#ff006e"/>
        <rect x="0" y="6" width="2" height="2" fill="#ff006e"/>
        <rect x="2" y="6" width="2" height="2" fill="#ff4d94"/>
        <rect x="4" y="6" width="2" height="2" fill="#ff4d94"/>
        <rect x="6" y="6" width="2" height="2" fill="#ff4d94"/>
        <rect x="8" y="6" width="2" height="2" fill="#ff4d94"/>
        <rect x="10" y="6" width="2" height="2" fill="#ff4d94"/>
        <rect x="12" y="6" width="2" height="2" fill="#ff4d94"/>
        <rect x="14" y="6" width="2" height="2" fill="#ff006e"/>
        <rect x="2" y="8" width="2" height="2" fill="#ff006e"/>
        <rect x="4" y="8" width="2" height="2" fill="#ff4d94"/>
        <rect x="6" y="8" width="2" height="2" fill="#ff4d94"/>
        <rect x="8" y="8" width="2" height="2" fill="#ff4d94"/>
        <rect x="10" y="8" width="2" height="2" fill="#ff4d94"/>
        <rect x="12" y="8" width="2" height="2" fill="#ff006e"/>
        <rect x="4" y="10" width="2" height="2" fill="#ff006e"/>
        <rect x="6" y="10" width="2" height="2" fill="#ff4d94"/>
        <rect x="8" y="10" width="2" height="2" fill="#ff4d94"/>
        <rect x="10" y="10" width="2" height="2" fill="#ff006e"/>
        <rect x="6" y="12" width="2" height="2" fill="#ff006e"/>
        <rect x="8" y="12" width="2" height="2" fill="#ff006e"/>
      </svg>

      <h1>PLAYER 2,</h1>
      <h1>WANT TO CO-OP</h1>
      <h1>THROUGH LIFE?</h1>
      <p class="player-text">‚ù§Ô∏è PLAYER 1 AWAITS ‚ù§Ô∏è</p>

      <div class="controls" id="controls">
        <button id="yesBtn">‚ñ∂ YES</button>
        <button id="noBtn">‚úï NO</button>
      </div>

      <div class="hint" id="hint">TIP: "NO" BUTTON HAS<br/>DODGE MECHANICS! üéÆ</div>

      <div class="result" id="result">
        <h2>üéÆ ACHIEVEMENT üéÆ</h2>
        <h2>UNLOCKED!</h2>
        <div class="achievement">
          <div class="trophy">üèÜ</div>
          <div style="margin-top: 8px;">VALENTINE ACQUIRED</div>
          <div style="margin-top: 6px; font-size: clamp(8px, 1.8vw, 10px);">+1000 LOVE POINTS</div>
          <div style="margin-top: 6px;">MULTIPLAYER MODE:<br/>ACTIVATED! üíï</div>
        </div>
      </div>
    </div>
  </main>

  <script>
    const controls = document.getElementById("controls");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const hint = document.getElementById("hint");

    const confettiCanvas = document.getElementById("confettiCanvas");
    function resizeConfettiCanvas() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      confettiCanvas.width = Math.floor(window.innerWidth * dpr);
      confettiCanvas.height = Math.floor(window.innerHeight * dpr);
    }
    resizeConfettiCanvas();
    window.addEventListener("resize", resizeConfettiCanvas);

    const confettiInstance = confetti.create(confettiCanvas, { resize: false, useWorker: true });

    function pixelConfetti() {
      const colors = ['#ff006e', '#00f5ff', '#8b00ff', '#00ff00', '#ffff00'];
      const end = Date.now() + 2000;
      (function frame() {
        confettiInstance({
          particleCount: 3,
          angle: 60,
          spread: 55,
          origin: { x: 0 },
          colors: colors,
          shapes: ['square'],
          scalar: 2
        });
        confettiInstance({
          particleCount: 3,
          angle: 120,
          spread: 55,
          origin: { x: 1 },
          colors: colors,
          shapes: ['square'],
          scalar: 2
        });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();
    }

    let yesScale = 1;
    function growYes() {
      yesScale = Math.min(1.7, yesScale + 0.08);
      const baseTransform = window.innerWidth <= 380 ? 'translate(-50%, -50%)' : 'translateY(-50%)';
      yesBtn.style.transform = `${baseTransform} scale(${yesScale})`;
    }

    const jumpDistance = 50;
    const directions = [
      {x: -1, y: 0}, {x: 1, y: 0}, {x: 0, y: -1}, {x: 0, y: 1},
      {x: -1, y: -1}, {x: 1, y: -1}, {x: -1, y: 1}, {x: 1, y: 1}
    ];

    function dodgeNo(px, py) {
      const c = controls.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      let dx = (b.left + b.width / 2) - px;
      let dy = (b.top + b.height / 2) - py;
      let bestDir = directions[0];
      let bestScore = -Infinity;
      directions.forEach(dir => {
        const score = dx * dir.x + dy * dir.y;
        if (score > bestScore) { bestScore = score; bestDir = dir; }
      });
      let newLeft = (b.left - c.left) + (bestDir.x * jumpDistance);
      let newTop = (b.top - c.top) + (bestDir.y * jumpDistance);
      newLeft = Math.max(0, Math.min(c.width - b.width, newLeft));
      newTop = Math.max(0, Math.min(c.height - b.height, newTop));

      if (window.innerWidth <= 380) {
        noBtn.style.left = (newLeft / c.width * 100) + "%";
        noBtn.style.right = "auto";
        noBtn.style.transform = "translate(-50%, -50%)";
      } else {
        noBtn.style.left = newLeft + "px";
        noBtn.style.right = "auto";
        noBtn.style.transform = "translateY(0)";
      }
      noBtn.style.top = newTop + "px";
      growYes();
    }

    controls.addEventListener("pointermove", e => {
      const b = noBtn.getBoundingClientRect();
      const distance = Math.hypot((b.left + b.width / 2) - e.clientX, (b.top + b.height / 2) - e.clientY);
      if (distance < 90) dodgeNo(e.clientX, e.clientY);
    });

    noBtn.addEventListener("click", e => e.preventDefault());

    yesBtn.addEventListener("click", () => {
      controls.style.display = "none";
      hint.style.display = "none";
      result.style.display = "block";
      resizeConfettiCanvas();
      pixelConfetti();
    });
  </script>
</body>
</html>
